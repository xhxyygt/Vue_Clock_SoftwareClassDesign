<html>
<head>
    <link rel="stylesheet" href="http://at.alicdn.com/t/c/font_4380206_ueqocr9g2l.css">
    <style>
        #container {
            width: 400px;
        margin: 100px auto;
        padding: 20px;
        background-color: #fff;
        border-radius: 10px;
        box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.3);
        /* 居中 */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;

        }
        #timer {
            font-size: 36px;
            margin: 10px;
            text-align: center;
            /* border: 5px solid gray; */
            border-radius: 20px;
            padding: 10px;
        }
        #buttons {
            margin: 10px;
            text-align: center;
            /* 在页面中不动 */
            position: fixed;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            
        }
        #start, #record, #pause, #resume, #stop {
            color: rgb(53, 134, 232);
            font-size: 40px;
            padding: 5px;
            border: none;
            /* 阴影 */
            box-shadow: 2px 5px 5px rgba(0, 0, 0, 0.3);
            /* 居中 */
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 100px;
            margin: 20px;
        }
        #start {
            width: 100px;

        }

        #record-list {
            margin: 10px;
            font-size: 18px;
            width: 400px;
            max-height: 300px;
            overflow-y: auto;
            padding: 10px;

        }
        #record-list li {
            list-style-type: none;
            display: flex;
            justify-content: space-between;
            border: 2px solid gray;
            border-radius: 10px;
            margin: 5px;
            padding: 5px;
        }
        #record-list li span:last-child {
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="timer">00:00.000</div>
        <ul id="record-list" style="display: none;"></ul>
    </div>

    <div id="buttons">
        <button class="iconfont icon-kaishi1" id="start"></button>
        <button class="iconfont icon-miaobiao" id="record" style="display: none;"></button>
        <button class="iconfont icon-weibiaoti519" id="pause" style="display: none;"></button>
        <button class="iconfont icon-lujing" id="stop" style="display: none;"></button>
        <button class="iconfont icon-kaishi1" id="resume" style="display: none;"></button>
    </div>

    <script>
        // 获取元素
        var timer = document.getElementById("timer");
        var start = document.getElementById("start");
        var record = document.getElementById("record");
        var pause = document.getElementById("pause");
        var resume = document.getElementById("resume");
        var stop = document.getElementById("stop");
        var recordList = document.getElementById("record-list");

        // 定义变量
        var startTime = 0; // 开始时间
        var pauseTime = 0; // 暂停时间
        var pause_period = 0; // 暂停时长
        var interval = null; // 计时器
        var recordCount = 0; // 记录次数
        var lastRecordTime = 0; // 上一次记录时间

        // 定义函数
        // 格式化时间
        function formatTime(time) {
            var minutes = Math.floor(time / 60000);
            var seconds = Math.floor((time % 60000) / 1000);
            var milliseconds = time % 1000;
            return (minutes < 10 ? "0" + minutes : minutes) + ":" + (seconds < 10 ? "0" + seconds : seconds) + "." + (milliseconds < 10 ? "00" + milliseconds : milliseconds < 100 ? "0" + milliseconds : milliseconds);
        }

        // 更新时间
        function updateTime() {
            var currentTime = Date.now();
            var elapsedTime = currentTime - startTime - pause_period;
            timer.textContent = formatTime(elapsedTime);
            return elapsedTime;
        }

        // 开始计时
        function startTimer() {
            startTime = Date.now();
            interval = setInterval(updateTime, 10);
            start.style.display = "none";
            record.style.display = "inline";
            pause.style.display = "inline";
        }

        // 暂停计时
        function pauseTimer() {

            clearInterval(interval);
            pauseTime = Date.now();
            // pauseTime += Date.now() - startTime;
            record.style.display = "none";
            pause.style.display = "none";
            // 点击暂停之后暂停按钮变成继续按钮，记录按钮变为停止按钮
            stop.style.display = "inline";
            resume.style.display = "inline";
        }

        // 继续计时
        function resumeTimer() {
            pause_period += Date.now() - pauseTime;
            // startTime = Date.now();
            interval = setInterval(updateTime, 10);
            resume.style.display = "none";
            stop.style.display = "none";
            record.style.display = "inline";
            pause.style.display = "inline";
        }

        // 结束计时
        function stopTimer() {
            clearInterval(interval);
            timer.textContent = "00:00.000";
            recordList.innerHTML = "";
            resume.style.display = "none";
            stop.style.display = "none";
            start.style.display = "inline";
            recordList.style.display = "none";
            startTime = 0;
            pauseTime = 0;
            pause_period = 0;
            recordCount = 0;
            lastRecordTime = 0;
        }

        // 记录时间
        function recordTimer() {
            recordList.style.display = "block";
            recordCount++;
            var currentTime = updateTime();
            var diffTime = currentTime - lastRecordTime;
            lastRecordTime = currentTime;
            var recordItem = document.createElement("li");
            recordItem.innerHTML = "<span>" + (recordCount < 10 ? "0" + recordCount : recordCount) + 
                "</span><span>+" + formatTime(diffTime) + "</span><span>" + formatTime(currentTime) + "</span>";
            recordList.appendChild(recordItem);
        }

        // 添加事件监听
        start.addEventListener("click", startTimer);
        pause.addEventListener("click", pauseTimer);
        resume.addEventListener("click", resumeTimer);
        stop.addEventListener("click", stopTimer);
        record.addEventListener("click", recordTimer);
    </script>
</body>
</html>
